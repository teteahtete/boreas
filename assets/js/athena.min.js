var Athena;!function(a){var b=function(){function b(){}return b.getBlogUrl=function(){return $("body").data("blog-rss")},b.getTagWrapper=function(){return $("#blog-tags").get(0)},b.prototype.sideBar=function(){return $("[data-toggle=offcanvas]").click(function(){$(".row-offcanvas").toggleClass("active")}),this},b.prototype.tags=function(){var c=b.getBlogUrl(),d=b.getTagWrapper(),e='<div><a href="#:url#">#:category# [#:articleCount#]</a></div>';return void 0===c||void 0===d?this:(this.getChannel(c).then(function(b){var c=b.getCategories(a.Utils.slugify);$(d).kendoListView({template:kendo.template(e),dataSource:new kendo.data.DataSource({data:c})})}),this)},b.prototype.getChannel=function(b){var c=this,d=$.Deferred(),e=window.sessionStorage.getItem("blogCategories");if(null!=e){d.promise();var f=a.Data.Context.RssChannelReader.parseJson(e);d.resolve(f)}else a.Data.Context.RssChannelReader.read(b).fail(function(){d.fail(),d.reject("failure")}).done(function(a){c.setChannel(a),d.promise(),d.resolve(a)});return d},b.prototype.setChannel=function(a){null===window.sessionStorage.getItem("blogCategories")&&window.sessionStorage.setItem("blogCategories",JSON.stringify(a))},b.prototype.tooltips=function(){return $('[data-toggle="tooltip"]').tooltip(),this},b}();a.Bootstrapper=b}(Athena||(Athena={})),$(document).ready(function(){(new Athena.Bootstrapper).tooltips().sideBar().tags()});var Athena;!function(a){var b;!function(b){var c;!function(b){var c=function(){function b(){}return b.read=function(b){var c=this;return $.get(b).then(function(a){return c.parseXml(a)},function(){return new a.Data.Model.RssChannel})},b.parseXml=function(c){var d=$(c).find("channel").first(),e=new a.Data.Model.RssChannel;return e.title=d.children("title").text(),e.description={link:d.children("link").text(),generator:d.children("generator").text(),lastBuildDate:new Date(Date.parse(d.children("lastBuildDate").text()))},e.items=_.map(d.find("item"),b.parseRssItem),e},b.parseJson=function(b){var c=new a.Data.Model.RssChannel,d=JSON.parse(b);return c.title=d.title,c.description=d.description,c.items=d.items,c},b.parseRssItem=function(c,d,e){var f=new a.Data.Model.RssChannelItem;return f.title=$(c).children("title").text(),f.description=$(c).children("description").text(),f.guid=$(c).children("guid").text(),f.link=$(c).children("link").text(),f.content=$(c).children("content").text(),f.creator=$(c).children("dc\\:creator").text(),f.pubDate=new Date(Date.parse($(c).children("pubDate").text())),f.categories=_.map($(c).children("category"),b.parseRssItemCategories),f},b.parseRssItemCategories=function(a,b,c){return $(a).text()},b}();b.RssChannelReader=c}(c=b.Context||(b.Context={}))}(b=a.Data||(a.Data={}))}(Athena||(Athena={}));var Athena;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){this.categories=new Array}return a}();a.RssChannelItem=b;var c=function(){function a(){}return a.prototype.getCategories=function(a){var b=this,c=new Array,d=_.filter(this.items,function(a){return a.categories.length>0}),e=_.uniq(_.flatten(_.pluck(d,"categories")));return c=_.map(e,function(c){return{category:c,articleCount:b.getCategoryCount(d,c),url:"/tag/"+a(c)}})},a.prototype.getCategoryCount=function(a,b){var c=_.reduce(a,function(a,c){return _.contains(c.categories,b)?++a:a},0);return c},a}();a.RssChannel=c}(b=a.Model||(a.Model={}))}(b=a.Data||(a.Data={}))}(Athena||(Athena={}));var Athena;!function(a){var b;!function(a){function b(a){return a.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}a.slugify=b}(b=a.Utils||(a.Utils={}))}(Athena||(Athena={}));
//# sourceMappingURL=athena.min.js.map